
:root{--bg:#f8fafc;--card:#ffffff;--muted:#f2f4f7;--border:#e5e7eb;--accent:#10b981}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Noto Sans',sans-serif;background:var(--bg);color:#0f172a}
.container{max-width:1200px;margin:0 auto;padding:16px}
.muted{color:var(--muted)} .small{font-size:12px;color:var(--muted)} .req{color:#ef4444}

.app-header{position:sticky;top:0;left:0;background:rgba(196, 134, 21, 0.753);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
.head-wrap{display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;gap:10px;align-items:center}
.logo{width:36px;height:36px;border-radius:12px;background:var(--accent);display:grid;place-items:center;color:#fff;font-weight:700;box-shadow:0 1px 2px rgba(0,0,0,.15)}
.brand h1{font-size:18px;margin:0}
.actions{display:flex;gap:8px}

.btn{appearance:none;border:1px solid var(--border);background:#fff;border-radius:10px;padding:8px 12px;cursor:pointer;display:inline-flex;align-items:center;gap:8px}
.btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
.btn:disabled{opacity:.6;cursor:not-allowed}
.actions-inline{display:flex;gap:8px;flex-wrap:wrap}
.actions-inline.end{justify-content:flex-end}

.app-main{display:grid;grid-template-columns:1fr;gap:16px;padding:16px}
@media (min-width:1024px){.app-main{grid-template-columns:1fr 2fr}}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden}
.card h3{margin:0;padding:12px 16px;border-bottom:1px solid var(--border);font-size:14px}
.card .content{padding:12px 16px}
.card.full{grid-column:1/-1}

.kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.kpi{background:#fff;border:1px solid var(--border);border-radius:14px;padding:10px}
.kpi .label{font-size:12px;color:var(--muted)}
.kpi .value{font-size:22px;font-weight:700}

.badges{display:flex;flex-wrap:wrap;gap:8px}
.badge{font-size:12px;border:1px solid var(--border);padding:4px 8px;border-radius:999px;background:#f9fafb}

.list{border-top:1px solid var(--border)}
.item{display:flex;gap:10px;padding:10px 16px;border-bottom:1px solid var(--border)}
.dot{width:10px;height:10px;border-radius:999px;margin-top:6px}

#map{height:70vh}
#map,
.leaflet-container,
.leaflet-pane,
.leaflet-map-pane { z-index: 0 !important; }


/* Filters panel */
.filters{position:fixed;inset:auto 0 0 auto;top:64px;width:360px;max-width:90vw;background:#fff;border-left:1px solid var(--border);box-shadow:-6px 0 16px rgba(0,0,0,.06);transform:translateX(110%);transition:transform .25s ease;border-top-left-radius:12px; z-index: 2000;}
.filters.open{transform:translateX(0)}
.filters .content{padding:16px}
.field{display:grid;gap:6px;margin-bottom:12px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
input,select,textarea{padding:9px 10px;border:1px solid var(--border);border-radius:10px;font:inherit}
.legend{margin-top:16px}
.legend-title{font-size:12px;margin-bottom:6px}
.legend-row{display:flex;align-items:center;gap:10px}


/* --- Scroll interno del panel de filtros--- */
.filters {
  height: calc(100vh - 64px);
  overflow: hidden;
}

.filters .content {
  max-height: 100%;
  overflow-y: auto;
  scroll-behavior: smooth;
}

.filters .content::-webkit-scrollbar {
  width: 8px;
}
.filters .content::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 4px;
}
.filters .content::-webkit-scrollbar-thumb:hover {
  background: #aaa;
}


/* Dialog */
dialog{border:none;border-radius:16px;max-width:720px;width:92vw;padding:0;box-shadow:0 20px 60px rgba(0,0,0,.25)}
dialog::backdrop{background:rgba(0,0,0,.35)}
.dialog-head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border)}
.dialog-body{padding:12px 16px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.col-span{grid-column:1/-1}
.map-mini{height:260px;border:1px solid var(--border);border-radius:12px;overflow:hidden}

/* Footer */
footer{padding:24px 16px;font-size:12px;color:var(--muted)}


/* Recomendaciones */
.recom-head {
  display:flex; align-items:center; justify-content:space-between;
  gap:8px; margin-bottom:8px;
}
.recom-badge {
  display:inline-block; padding:4px 10px; border-radius:999px;
  background: var(--bgSoft, #f4f4f5); font-weight:600; font-size:14px;
}
.recom-section { margin-top:10px; }
.recom-title {
  font-weight:700; font-size:14px; margin-bottom:6px;
  color: var(--text, #111827);
}
.recom-list { margin:0; padding-left:18px; }
.recom-list li { margin:4px 0; line-height:1.35; }
.recom-empty { padding:6px 2px; }
.recom-foot { margin-top:10px; color: var(--muted,#6b7280); }
