
:root{--bg:#f8fafc;--card:#ffffff;--muted:#f2f4f7;--border:#e5e7eb;--accent:#10b981}
*{box-sizing:border-box} html,body{height:100%}
body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial,'Noto Sans',sans-serif;background:var(--bg);color:#0f172a}
.container{max-width:1200px;margin:0 auto;padding:16px}
.muted{color:var(--muted)} .small{font-size:12px;color:var(--muted)} .req{color:#ef4444}

.app-header{position:sticky;top:0;left:0;background:rgba(196, 134, 21, 0.753);backdrop-filter:blur(8px);border-bottom:1px solid var(--border)}
.head-wrap{display:flex;align-items:center;justify-content:space-between}
.brand{display:flex;gap:10px;align-items:center}
.logo{width:36px;height:36px;border-radius:12px;background:var(--accent);display:grid;place-items:center;color:#fff;font-weight:700;box-shadow:0 1px 2px rgba(0,0,0,.15)}
.brand h1{font-size:18px;margin:0}
.actions{display:flex;gap:8px}

.btn{appearance:none;border:1px solid var(--border);background:#fff;border-radius:10px;padding:8px 12px;cursor:pointer;display:inline-flex;align-items:center;gap:8px}
.btn.primary{background:var(--accent);border-color:var(--accent);color:#fff}
.btn:disabled{opacity:.6;cursor:not-allowed}
.actions-inline{display:flex;gap:8px;flex-wrap:wrap}
.actions-inline.end{justify-content:flex-end}

.app-main{display:grid;grid-template-columns:1fr;gap:16px;padding:16px}
@media (min-width:1024px){.app-main{grid-template-columns:1fr 2fr}}
.card{background:var(--card);border:1px solid var(--border);border-radius:16px;overflow:hidden}
.card h3{margin:0;padding:12px 16px;border-bottom:1px solid var(--border);font-size:14px}
.card .content{padding:12px 16px}
.card.full{grid-column:1/-1}

.kpis{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
.kpi{background:#fff;border:1px solid var(--border);border-radius:14px;padding:10px}
.kpi .label{font-size:12px;color:#0f172a var(--muted)}
.kpi .value{font-size:22px;font-weight:700}

.badges{display:flex;flex-wrap:wrap;gap:8px}
.badge{font-size:12px;border:1px solid var(--border);padding:4px 8px;border-radius:999px;background:#f9fafb}

.list{border-top:1px solid ;color:#0f172a var(--border)}
.item{display:flex;gap:10px;padding:10px 16px;border-bottom:1px solid var(--border)}
.dot{width:10px;height:10px;border-radius:999px;margin-top:6px}

#map{height:70vh}
#map,
.leaflet-container,
.leaflet-pane,
.leaflet-map-pane { z-index: 0 !important; }


/* Filters panel */
.filters{position:fixed;inset:auto 0 0 auto;top:64px;width:360px;max-width:90vw;background:#fff;border-left:1px solid var(--border);box-shadow:-6px 0 16px rgba(0,0,0,.06);transform:translateX(110%);transition:transform .25s ease;border-top-left-radius:12px; z-index: 2000;}
.filters.open{transform:translateX(0)}
.filters .content{padding:16px}
.field{display:grid;gap:6px;margin-bottom:12px}
.row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
input,select,textarea{padding:9px 10px;border:1px solid var(--border);border-radius:10px;font:inherit}
.legend{margin-top:16px}
.legend-title{font-size:12px;margin-bottom:6px}
.legend-row{display:flex;align-items:center;gap:10px}


/* --- Scroll interno del panel de filtros--- */
.filters {
  height: calc(100vh - 64px);
  overflow: hidden;
}

.filters .content {
  max-height: 100%;
  overflow-y: auto;
  scroll-behavior: smooth;
}

.filters .content::-webkit-scrollbar {
  width: 8px;
}
.filters .content::-webkit-scrollbar-thumb {
  background: #ccc;
  border-radius: 4px;
}
.filters .content::-webkit-scrollbar-thumb:hover {
  background: #aaa;
}


/* Dialog */
dialog{border:none;border-radius:16px;max-width:720px;width:92vw;padding:0;box-shadow:0 20px 60px rgba(0,0,0,.25)}
dialog::backdrop{background:rgba(0,0,0,.35)}
.dialog-head{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid var(--border)}
.dialog-body{padding:12px 16px}
.grid-2{display:grid;grid-template-columns:1fr 1fr;gap:12px}
.col-span{grid-column:1/-1}
.map-mini{height:260px;border:1px solid var(--border);border-radius:12px;overflow:hidden}

/* Footer */
footer{padding:24px 16px;font-size:12px;color:var(--muted)}


/* Recomendaciones */
.recom-head {
  display:flex; align-items:center; justify-content:space-between;
  gap:8px; margin-bottom:8px;
}
.recom-badge {
  display:inline-block; padding:4px 10px; border-radius:999px;
  background: var(--bgSoft, #f4f4f5); font-weight:600; font-size:14px;
}
.recom-section { margin-top:10px; }
.recom-title {
  font-weight:700; font-size:14px; margin-bottom:6px;
  color: var(--text, #111827);
}
.recom-list { margin:0; padding-left:18px; }
.recom-list li { margin:4px 0; line-height:1.35; }
.recom-empty { padding:6px 2px; }
.recom-foot { margin-top:10px; color: var(--muted,#6b7280); }
.videos-section {
    background: #fff;
    padding: 20px;
    overflow: hidden; /* Para contener el slider */
}

/* =========================================
   SLIDER DE VIDEOS (CORRECCIÓN ANCHO COMPLETO)
   ========================================= */

/* El contenedor principal (la tarjeta blanca) */
.videos-section {
    background: #fff;
    padding: 20px;
    margin-bottom: 20px; /* Espacio abajo antes del mapa */
    border-radius: 1rem;
    box-shadow: 0 1px 3px rgba(0,0,0,0.1);
    
    /* ESTO ES LO QUE ARREGLA EL ANCHO: */
    width: 100%; 
    display: block;
    box-sizing: border-box;
}

/* Encabezado con título y flechas */
.section-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
    width: 100%; /* Asegura que ocupe todo el ancho */
}

.video-slider-container {
    position: relative;
    padding: 5px 0;
    width: 100%; /* Asegura que ocupe todo el ancho */
    overflow: hidden;
}

/* La tira deslizante de videos */
.video-slider {
    display: flex;
    gap: 20px;
    overflow-x: auto;
    scroll-behavior: smooth;
    padding: 10px 5px;
    scrollbar-width: none;
    width: 100%; /* Asegura que ocupe todo el ancho */
}
.video-slider::-webkit-scrollbar { display: none; }

/* =========================================
   DISEÑO DE TARJETAS UNIFORMES (LINDO)
   ========================================= */

.video-card {
    min-width: 280px;
    width: 280px;
    
    /* 1. Altura FIJA para que todas sean gemelas */
    height: 380px; 
    
    background-color: #ffffff;
    border-radius: 12px; /* Bordes más redondeados */
    padding: 12px;
    
    /* Flexbox para organizar el contenido verticalmente */
    display: flex;
    flex-direction: column;
    justify-content: flex-start;
    
    border: 1px solid #e5e7eb;
    box-shadow: 0 2px 5px rgba(0,0,0,0.05); /* Sombra suave */
    transition: all 0.3s ease;
    flex-shrink: 0;
}

/* Hover: Se levanta y cambia de color */
.video-card:hover {
    transform: translateY(-8px);
    box-shadow: 0 15px 30px rgba(0,0,0,0.15);
    border-color: var(--turquesa);
}
/* Nota: Ya no cambiamos el fondo a verde completo porque 
   leer mucho texto blanco sobre verde cansa la vista. 
   Solo borde y sombra es más elegante. */


/* CONTENEDOR DEL VIDEO */
.video-wrapper {
    width: 100%;
    height: 150px; /* Altura fija del video */
    background: #000;
    border-radius: 8px;
    overflow: hidden;
    flex-shrink: 0; /* Que no se aplaste */
    margin-bottom: 12px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.video-wrapper video {
    width: 100%;
    height: 100%;
    object-fit: cover;
}

/* CONTENEDOR DE TEXTOS */
.video-info {
    display: flex;
    flex-direction: column;
    flex: 1; /* Ocupa el resto del espacio de la tarjeta */
    overflow: hidden; /* Para que el scroll funcione adentro */
}

/* TÍTULO */
.video-title {
    font-weight: 700;
    font-size: 1rem;
    color: #1f2937;
    margin-bottom: 8px;
    line-height: 1.2;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

/* DESCRIPCIÓN (Con Scroll invisible si es muy larga) */
.video-desc {
    font-size: 0.85rem;
    color: #6b7280;
    line-height: 1.5;
    text-align: left;
    
    /* Esto hace que si hay mucho texto, puedas scrollear DENTRO de la tarjeta */
    overflow-y: auto; 
    padding-right: 5px; /* Espacio para evitar roce */
    
    /* Barra de scroll fina y bonita */
    scrollbar-width: thin;
    scrollbar-color: #ccc transparent;
}

/* Estilo del scroll para Chrome/Safari */
.video-desc::-webkit-scrollbar {
    width: 4px;
}
.video-desc::-webkit-scrollbar-thumb {
    background-color: #ddd;
    border-radius: 4px;
}

/* Botones redondos */
.slider-controls button {
    background: white;
    border: 1px solid #ddd;
    width: 35px; height: 35px; border-radius: 50%;
    cursor: pointer; color: #022d6d;
    transition: 0.2s;
    display: flex; align-items: center; justify-content: center;
}
.slider-controls button:hover {
    background: #1abc9c; color: white; border-color: #1abc9c;
}